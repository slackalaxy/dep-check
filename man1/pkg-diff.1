.\" 
.\" pkg\-diff manual page.
.\" (C) 2025 by Petar Petrov <slackalaxy@gmail.com> 
.\"
.TH pkg\-diff 1
.SH NAME
pkg\-diff \- Check for rebuilt packages on pkg-get managed systems
.SH SYNOPSIS
.PP
.B pkg-diff
.SH DESCRIPTION

The \fBpkg\-diff\fP script uses \fBdiff\fP(8) to compare a freshly synced
PKGREPO file with a copy of the old one and output differences of packages
found between them. It will distinguish between packages with a changed
version/release and those that are at the same version but differ in their
.md5sum, typically after a rebuild.

.SH OPTIONS
.TP
.B "\-s, \-\-snap"
Create a snapshot of current PKGREPO. This copies PKGREPO from the location
specified in \fBpkg\-get.conf\fP(8) to \fB/var/tmp/pkg\-diff/\fP to be compared
later with an updated PKGREPO file generated by \fBpkg\-get sync\fP.
.TP
.B "\-lr, \-\-list\-rebuilt"
Output diferring packages that were rebuilt as a simple list, easy to parse.
If none are found, the output is blank.
.TP
.B "\-h, \-\-help"
Display help.

.SH EXAMPLES
.B
pkg\-diff
.PP
displays a verbose output distinguishing between different versions and
packages with changed .md5sum:

.PP
.nf
.fam C
-- differences ([u] = updated, [r] = rebuilt)
[u] apr-util
[u] dhcpcd
[u] libinput
[u] libusb
[r] nss
[r] openmpi
[r] pciutils
[r] python3
[u] util-linux
.fam T
.fi

.B
pkg\-diff -s
.PP
will make a copy of the PKGREPO file currently available to another location,
so it can be compared to a new PKGREPO file after a \fBpkg\-get sync\fP.

.B
pkg\-diff \-lr
.PP
displays only packages with changed .md5sum, as a list:

.PP
.nf
.fam C
nss
penmpi
pciutils
python3
.fam T
.fi

.SH SEE ALSO
\fBpkg\-get\fP(8), \fBports\fP(8), \fBrevdep\fP(1), \fBmissdeps\fP(1)

.SH AUTHOR

\fBpkg\-diff\fP was written by Petar Petrov <slackalaxy@gmail.com> for CRUX.
